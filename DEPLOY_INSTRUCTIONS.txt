
GUIA DE DIAGNÓSTICO DE CONEXÃO (RODE NO TERMINAL DA VPS)

Siga estes passos para descobrir onde o sinal está parando:

1. TESTE SE O PROCESSO NODE ESTÁ RODANDO:
   $ pm2 list
   (O status deve estar 'online' para kavins-corte)

2. TESTE SE A PORTA 3002 ESTÁ "OUVINDO":
   $ netstat -tunlp | grep 3002
   (Deve aparecer uma linha indicando LISTEN)

3. TESTE A API LOCALMENTE (Ignora o Nginx):
   $ curl http://127.0.0.1:3002/corte/api/health
   
   RESPOSTAS POSSÍVEIS:
   - Se retornar JSON com "database: connected": O Node e o Banco estão PERFEITOS. O problema é no Nginx.
   - Se retornar JSON com "database: disconnected": O problema é no arquivo .env (senha ou usuário).
   - Se retornar "Connection Refused": O servidor Node nem sequer ligou.

4. TESTE A API VIA NGINX (O que o navegador faz):
   $ curl http://gestaokavins.com.br/corte/api/health
   
   - Se aqui der erro e o passo 3 funcionou, seu arquivo de configuração do Nginx está errado.
   - Certifique-se de que a `location /corte/api` no Nginx aponta para `http://127.0.0.1:3002/corte/api`.

5. COMANDO PARA VER O ERRO REAL NO BANCO:
   $ pm2 logs kavins-corte --lines 50
   
   - Se vir "ER_ACCESS_DENIED_ERROR": A senha no .env está errada.
   - Se vir "ENOTFOUND": O DB_HOST no .env deve ser 127.0.0.1.

DICA DE OURO: No Linux, às vezes o MySQL não aceita 'localhost'. 
Sempre use '127.0.0.1' no arquivo .env.
