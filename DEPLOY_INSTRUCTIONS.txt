
CÓDIGOS SQL PARA MANUTENÇÃO (COPIE E COLE NO MYSQL):

1. Acesse o MySQL:
mysql -u root -p

2. Selecione o banco:
USE corte;

3. EXECUTE ESTE COMANDO para garantir que o MySQL aceite datas vazias ou formatos ISO se necessário:
SET GLOBAL sql_mode = 'NO_ENGINE_SUBSTITUTION';
SET SESSION sql_mode = 'NO_ENGINE_SUBSTITUTION';

4. Tabelas (Caso precise recriar alguma):

CREATE TABLE products (
    id VARCHAR(50) PRIMARY KEY,
    code VARCHAR(50) NOT NULL,
    description TEXT,
    default_fabric VARCHAR(100),
    default_colors JSON,
    default_grid VARCHAR(20),
    estimated_pieces_per_roll INT DEFAULT 0
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

CREATE TABLE orders (
    id VARCHAR(50) PRIMARY KEY,
    reference_id VARCHAR(50),
    reference_code VARCHAR(50),
    description TEXT,
    fabric VARCHAR(100),
    items JSON,
    active_cutting_items JSON,
    splits JSON,
    grid_type VARCHAR(20),
    status VARCHAR(50),
    notes TEXT,
    created_at DATETIME,
    updated_at DATETIME,
    finished_at DATETIME
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

CREATE TABLE seamstresses (
    id VARCHAR(50) PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    phone VARCHAR(20),
    specialty VARCHAR(100),
    active BOOLEAN DEFAULT TRUE,
    address TEXT,
    city VARCHAR(100)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

CREATE TABLE fabrics (
    id VARCHAR(50) PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    color VARCHAR(50),
    color_hex VARCHAR(7),
    stock_rolls DECIMAL(10,2) DEFAULT 0.00,
    notes TEXT,
    created_at DATETIME,
    updated_at DATETIME
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

5. PARA VER OS ERROS NO SERVIDOR:
pm2 logs kavins-corte --lines 50
